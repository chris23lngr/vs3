---
title: Installation
description: How to get up and running with vS3.
---

<Steps>

<Step>

## Install dependencies

Install the required dependencies with a package manager of your choice:

<CodeTabs groupId="package-manager" defaultValue="pnpm" values={["pnpm", "npm", "yarn", "bun"]}>

<CodeTabsContent value="pnpm">
```bash
pnpm install vS3 @aws-sdk/client-s3 @aws-sdk/s3-request-presigner
```
</CodeTabsContent>

<CodeTabsContent value="npm">
```bash
npm install vS3 @aws-sdk/client-s3 @aws-sdk/s3-request-presigner
```
</CodeTabsContent>

<CodeTabsContent value="yarn">
```bash
yarn add vS3 @aws-sdk/client-s3 @aws-sdk/s3-request-presigner
```
</CodeTabsContent>

<CodeTabsContent value="bun">
```bash
bun add vS3 @aws-sdk/client-s3 @aws-sdk/s3-request-presigner
```
</CodeTabsContent>

</CodeTabs>

`vS3` requires the `@aws-sdk/client-s3` and `@aws-sdk/s3-request-presigner` packages to be installed. 

</Step>

<Step>

## Create a storage adapter

To interact with the storage provider you need to create an adapter. See [Adapters](/docs/server/adapters) for a full list of supported adapters.


```ts title="server/storage/server.ts"
import { aws } from "vs3/adapters";

const adapter = aws({
    region: process.env.AWS_REGION!,
    credentials: {
        accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!,
    },
});
```

</Step>

<Step>

## Create a storage instance

Create a storage instance and pass in the adapter you created:

```ts title="server/storage/server.ts"
export const storage = createStorage({
    bucket: process.env.AWS_BUCKET!,
    adapter,
});

// Required for the client to infer the metadata schema
// [!code highlight]
export type StorageMetadata = storage.$Infer.metadata;
```

While this will work without any other options you might want to pass in some additional options. Check out the [Configuration](/docs/configuration) section for more information.

</Step>

<Step>

## Mount handlers

Mount the handlers to your framework of choice at `/api/storage/[...all]`. If you prefer to use a different path, you can pass the `apiPath` option when creating the storage instance. See the [Configuration](/docs/configuration) section for more information.

<CodeTabs groupId="framework" defaultValue="nextjs" values={["nextjs"]}>

<CodeTabsContent value="nextjs">
```ts title="app/api/storage/[...all]/route.ts"
export const { GET, POST, OPTIONS, PUT } = toNextJsRouteHandler({ handler: storage.handler });
```
</CodeTabsContent>

</CodeTabs>

<Callout type="info">
Although we currently only provide an integration for Next.js, `vS3` supports any backend framework that uses standard request and response objects.
</Callout>

</Step>

<Step>

## Create a client instance

To access the storage API from the client you need to create a client instance. Create a client instance by importing `createStorageClient` for the framework of your choice and passing in the same options you passed to the storage instance.

<CodeTabs
	groupId="frontend-framework"
	defaultValue="react"
	values={["react", "vue"]}
>

<CodeTabsContent value="react">
```ts title="server/storage/client.ts"
"use client";

import { createStorageClient } from "vs3/react";
import type { StorageMetadata } from "./server";

export const storageClient = createStorageClient<StorageMetadata>({
    // Optional configuration
});
```
</CodeTabsContent>

<CodeTabsContent value="vue">
```ts title="server/storage/client.ts"
import { createStorageClient } from "vs3/vue";
import type { StorageMetadata } from "./server";

export const storageClient = createStorageClient<StorageMetadata>({
    // Optional configuration
});
```
</CodeTabsContent>

</CodeTabs>

If you passed the `StorageMetadata` type to the client instance, you do not need to pass the metadata schema again. The schema will be inferred automatically.

<Callout type="warn">
This will likely change in the future to allow for more flexibility. See [this issue](https://github.com/chris23lngr/vS3/issues/49) for more information.
</Callout>


</Step>

<Step>

## All done

That's it! You can now use `vS3` to upload and download files. Check out the [usage](/docs/usage) section for more information on how to use the client and server APIs.

<CodeTabs defaultValue="react" values={["react", "vue"]}>
<CodeTabsContent value="react">
```ts title="client-demo.tsx"
"use client";

const { upload } = storageClient.useUpload();
upload(file, { userId: "123" });
```
</CodeTabsContent>
<CodeTabsContent value="vue">
```ts title="client-demo.ts"
const { upload } = storageClient.useUpload();
await upload(file, { userId: "123" });
```
</CodeTabsContent>
</CodeTabs>

</Step>


</Steps>
